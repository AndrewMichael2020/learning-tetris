<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reinforcement Learning Tetris</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Reinforcement Learning Tetris</h1>
            <p>AI agents learn to play Tetris using CEM and REINFORCE algorithms</p>
        </header>
        
        <div class="main-content">
            <!-- Game Board Section -->
            <div class="game-section">
                <h2>Game Board</h2>
                <canvas id="gameCanvas" width="300" height="600"></canvas>
                <div class="game-controls">
                    <button id="streamBtn" class="btn btn-primary">Stream Agent</button>
                    <button id="playOnceBtn" class="btn btn-secondary">Play Once</button>
                    <button id="quickTrainBtn" class="btn btn-warning" disabled>Quick Train</button>
                </div>
                
                <!-- Button Instructions -->
                <div class="button-instructions">
                    <h3>How to Use</h3>
                    <div class="instruction-list">
                        <div class="instruction-item">
                            <span class="instruction-icon btn-primary-icon">▶</span>
                            <div class="instruction-text">
                                <strong>Stream Agent:</strong> Watch the AI play continuously in real-time with live updates
                            </div>
                        </div>
                        <div class="instruction-item">
                            <span class="instruction-icon btn-secondary-icon">●</span>
                            <div class="instruction-text">
                                <strong>Play Once:</strong> Run a single complete game episode and view final statistics
                            </div>
                        </div>
                        <div class="instruction-item">
                            <span class="instruction-icon btn-warning-icon">⚡</span>
                            <div class="instruction-text">
                                <strong>Quick Train:</strong> Train a new AI agent (available when training is enabled)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Stats Section -->
            <div class="stats-section">
                <h2>Statistics</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <label>Score:</label>
                        <span id="currentScore">0</span>
                    </div>
                    <div class="stat-item">
                        <label>Lines:</label>
                        <span id="currentLines">0</span>
                    </div>
                    <div class="stat-item">
                        <label>Steps:</label>
                        <span id="currentSteps">0</span>
                    </div>
                    <div class="stat-item">
                        <label>Status:</label>
                        <span id="gameStatus">Ready</span>
                    </div>
                </div>
                
                <h3>Episode Results</h3>
                <div class="results">
                    <div class="result-row">
                        <label>Episodes:</label>
                        <span id="totalEpisodes">0</span>
                    </div>
                    <div class="result-row">
                        <label>Avg Score:</label>
                        <span id="avgScore">0</span>
                    </div>
                    <div class="result-row">
                        <label>Total Lines:</label>
                        <span id="totalLines">0</span>
                    </div>
                    <div class="result-row">
                        <label>Best Score:</label>
                        <span id="bestScore">0</span>
                    </div>
                </div>
            </div>
            
            <!-- Controls Section -->
            <div class="controls-section">
                <h2>Controls</h2>
                
                <div class="control-group">
                    <h3>Play Settings</h3>
                    <div class="form-row">
                        <label for="episodes">Episodes:</label>
                        <input type="number" id="episodes" value="1" min="1" max="100">
                    </div>
                    <div class="form-row">
                        <label for="seed">Seed (optional):</label>
                        <input type="number" id="seed" placeholder="Random">
                    </div>
                    <div class="form-row">
                        <label for="algorithm">Algorithm:</label>
                        <select id="algorithm">
                            <option value="cem">CEM</option>
                            <option value="reinforce">REINFORCE</option>
                        </select>
                    </div>
                </div>
                
                <div class="control-group" id="trainControls" style="display: none;">
                    <h3>Training Settings</h3>
                    <div class="form-row">
                        <label for="trainAlgo">Algorithm:</label>
                        <select id="trainAlgo">
                            <option value="cem">CEM</option>
                            <option value="reinforce">REINFORCE</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="trainSeed">Seed:</label>
                        <input type="number" id="trainSeed" value="42">
                    </div>
                    
                    <!-- CEM specific controls -->
                    <div id="cemControls">
                        <div class="form-row">
                            <label for="generations">Generations:</label>
                            <input type="number" id="generations" value="3" min="1" max="10">
                        </div>
                        <div class="form-row">
                            <label for="populationSize">Population Size:</label>
                            <input type="number" id="populationSize" value="20" min="10" max="50">
                        </div>
                    </div>
                    
                    <!-- REINFORCE specific controls -->
                    <div id="reinforceControls" style="display: none;">
                        <div class="form-row">
                            <label for="trainEpisodes">Episodes:</label>
                            <input type="number" id="trainEpisodes" value="200" min="50" max="500">
                        </div>
                        <div class="form-row">
                            <label for="learningRate">Learning Rate:</label>
                            <input type="number" id="learningRate" value="0.01" step="0.001" min="0.001" max="1">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Status Section -->
        <div class="status-section">
            <h3>System Status</h3>
            <div id="systemStatus">
                <div>Policy: <span id="policyStatus">Loading...</span></div>
                <div>Training: <span id="trainingStatus">Disabled</span></div>
            </div>
        </div>
        
        <!-- Log Section -->
        <div class="log-section">
            <h3>Activity Log</h3>
            <div id="activityLog" class="log-container">
                <div class="log-entry">Application started</div>
            </div>
        </div>
    </div>
    
    <script src="/static/app.js"></script>
</body>
</html>